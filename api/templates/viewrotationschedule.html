<!doctype html>
<html>
<title>Manage Rotation</title>

<body>
	{% include 'commonheader.html' %}
	<b>Manage Rotation</b>
	<hr/><br/>

	<b>Current Rotation Schedules:</b><br/>
	{{ komf_rotation_schedule_comment }}<br/>
	<table border="2">
		<tr>
			<td><b>Delete</b></td><td><b>ID</b></td><td><b>Rotation Name</b></td><td><b>Start Time</b></td><td><b>ThemeBlock</b></td><td><b>Days</b></td><td><b>Kickoff Track ID</b></td>
		</tr>
		{% for row in rows %}
		<tr>
			<td><a href={{ url_for('deleterotationschedule', rotation_id = row.ID) }}>X</a></td>
			<td>{{ row.ID }}</td>
			<td>{{ row.RotationName }}</td>
			<td>{{ row.StartTime }}</td>
			<td>{{ row.name }}</td>
			<td>{{ row.Days }}</td>
			<td>{{ row.KickoffTrackID }}</td>
		</tr>
		{% endfor %}
	</table>
	<br/>

	<b>Add New Row:</b>
	<form action="{{ url_for('addrotationschedule') }}" method="post">
	<table border="1">
		<tr>
			<td><b>Rotation Name</b></td><td><b>Start Time</b></td><td><b>ThemeBlock</b></td><td><b>Days</b></td><td><b>Kickoff Track ID</b></td>
		</tr>
		<tr>
			<td><input type="text" name="rotationname"/></td>
			<td>
				<select name="hour">
					<option value="00">00</option>
					<option value="01">01</option>
					<option value="02">02</option>
					<option value="03">03</option>
					<option value="04">04</option>
					<option value="05">05</option>
					<option value="06">06</option>
					<option value="07">07</option>
					<option value="08">08</option>
					<option value="09">09</option>
					<option value="10">10</option>
					<option value="11">11</option>
					<option value="12">12</option>
					<option value="13">13</option>
					<option value="14">14</option>
					<option value="15">15</option>
					<option value="16">16</option>
					<option value="17">17</option>
					<option value="18">18</option>
					<option value="19">19</option>
					<option value="20">20</option>
					<option value="21">21</option>
					<option value="22">22</option>
					<option value="23">23</option>
				</select>
				:
				<select name="minute">
					<option value="00">00</option>
					<option value="30">30</option>
				</select>
				:00
			</td>
			<td>
				<select name="themeblockid">
				{% for t in themeblocks %}
					<option value="{{ t.ID }}">{{ t.name }}</option>
				{% endfor %}
				</select>
			</td>
			<td>
				<input type="checkbox" name="Sunday">Sunday</input>
				<input type="checkbox" name="Monday">Monday</input>
				<input type="checkbox" name="Tuesday">Tuesday</input>
				<input type="checkbox" name="Wednesday">Wednesday</input>
				<input type="checkbox" name="Thursday">Thursday</input>
				<input type="checkbox" name="Friday">Friday</input>
				<input type="checkbox" name="Saturday">Saturday</input>
			</td>
			<td><input type="text" name="kickofftrackid"/></td>
		</tr>
	</table>
		<input type="submit" value="Save"/>
	</form>
	<hr/><br/>

	<b>Rotation Verifications:</b><br/>
	{{ komf_rotation_verification_comment }}<br/>
	<table border="2">
		<tr>
			<td><b>Name</b></td><td><b>Day</b></td><td><b>Hours</b></td><td><b>Min-Sec</b></td><td><b>Enabled</b></td><td><b>Data</b></td>
		</tr>
		{% for v in verifications %}
		<tr>
			<td>{{ v.name }}</td>
			<td>{{ v.day }}</td>
			<td>{{ v.hours }}</td>
			<td>{{ v.min_sec }}</td>
			<td>{{ v.enabled }}</td>
			<td>{{ v.data }}</td>
		</tr>
		{% endfor %}
	</table>
	<hr/><br/>

	<b>komf_hits_rotation_criteria</b><br/>
	{{ komf_hits_rotation_criteria_comment }}<br/>
	<form action="{{ url_for('savehitsrotationcriteria') }}" method="post">
	<table border="2">
		<tr>
			<td><b>min_bayesian</b></td><td><b>avg_bayesian</b></td><td><b>days_new</b></td><td><b>new_weight</b></td><td><b>days_old</b></td><td><b>old_weight</b></td><td><b>bays_if_zero</b></td><td><b>no_repeat_hours</b></td>
		</tr>
		<tr>
			<td><input type="text" name="min_bayesian" value="{{ hits_rotation_criteria.min_bayesian }}"/></td>
			<td><input type="text" name="avg_bayesian" value="{{ hits_rotation_criteria.avg_bayesian }}"/></td>
			<td><input type="text" name="days_new" value="{{ hits_rotation_criteria.days_new }}"/></td>
			<td><input type="text" name="new_weight" value="{{ hits_rotation_criteria.new_weight }}"/></td>
			<td><input type="text" name="days_old" value="{{ hits_rotation_criteria.days_old }}"/></td>
			<td><input type="text" name="old_weight" value="{{ hits_rotation_criteria.old_weight }}"/></td>
			<td><input type="text" name="bays_if_zero" value="{{ hits_rotation_criteria.bays_if_zero }}"/></td>
			<td><input type="text" name="no_repeat_hours" value="{{ hits_rotation_criteria.no_repeat_hours }}"/></td>
		</tr>
	</table>
		<input type="submit" value="Save"/>
	</form>
	<hr/><br/>

	<b>komf_rotation_criteria</b><br/>
	{{ komf_rotation_criteria_comment }}<br/>
	<form action="{{ url_for('saverotationcriteria') }}" method="post">
	<table border="2">
		<tr>
			<td><b>min_bayesian</b></td><td><b>avg_bayesian</b></td><td><b>days_new</b></td><td><b>new_weight</b></td><td><b>days_old</b></td><td><b>old_weight</b></td><td><b>bays_if_zero</b></td><td><b>no_repeat_hours</b></td>
		</tr>
		<tr>
			<td><input type="text" name="min_bayesian" value="{{ rotation_criteria.min_bayesian }}"/></td>
			<td><input type="text" name="avg_bayesian" value="{{ rotation_criteria.avg_bayesian }}"/></td>
			<td><input type="text" name="days_new" value="{{ rotation_criteria.days_new }}"/></td>
			<td><input type="text" name="new_weight" value="{{ rotation_criteria.new_weight }}"/></td>
			<td><input type="text" name="days_old" value="{{ rotation_criteria.days_old }}"/></td>
			<td><input type="text" name="old_weight" value="{{ rotation_criteria.old_weight }}"/></td>
			<td><input type="text" name="bays_if_zero" value="{{ rotation_criteria.bays_if_zero }}"/></td>
			<td><input type="text" name="no_repeat_hours" value="{{ rotation_criteria.no_repeat_hours }}"/></td>
		</tr>
	</table>
		<input type="submit" value="Save"/>
	</form>
	<hr/><br/>

	<b>komf_content_hours_per_week</b><br/>
	{{ komf_content_hours_per_week_comment }}<br/>
	<table border="2">
		<tr>
			<td><b>id_subcat</b></td><td><b>name</b></td><td><b>hours_of_content</b></td><td><b>total</b></td><td><b>percentage</b></td><td><b>hours_per_week</b></td>
		</tr>
		{% for row in content_hours_per_week %}
		<tr>
			<td>{{ row.id_subcat }}</td>
			<td>{{ row.name }}</td>
			<td>{{ row.hoursOfContent }}</td>
			<td>{{ row.total }}</td>
			<td>{{ row.percentage }}</td>
			<td>{{ row.hoursPerWeek }}</td>
		</tr>
		{% endfor %}
	</table>
	<hr/><br/>

	<b>komf_rotation_ranking (top 50)</b><br/>
	{{ komf_rotation_ranking_comment }}<br/>
	<table border="2">
		<tr>
			<td><b>ID</b></td><td><b>title</b></td><td><b>CorrectedBayesian</b></td><td><b>mean</b></td><td><b>post_date</b></td><td><b>date_played</b></td><td><b>daysOld</b></td><td><b>newFlag</b></td><td><b>oldFlag</b></td><td><b>playWeight</b></td>
		</tr>
		{% for row in rotation_ranking %}
		<tr>
			<td>{{ row.ID }}</td>
			<td>{{ row.title.decode('utf-8') }}</td>
			<td>{{ row.CorrectedBayesian }}</td>
			<td>{{ row.mean }}</td>
			<td>{{ row.post_date }}</td>
			<td>{{ row.date_played }}</td>
			<td>{{ row.daysOld }}</td>
			<td>{{ row.newFlag }}</td>
			<td>{{ row.oldFlag }}</td>
			<td>{{ row.playWeight }}</td>
		</tr>
		{% endfor %}
	</table>
	<hr/><br/>

	<b>komf_hits_rotation_ranking (top 50)</b><br/>
	{{ komf_hits_rotation_ranking_comment }}<br/>
	<table border="2">
		<tr>
			<td><b>ID</b></td><td><b>title</b></td><td><b>CorrectedBayesian</b></td><td><b>mean</b></td><td><b>post_date</b></td><td><b>date_played</b></td><td><b>daysOld</b></td><td><b>newFlag</b></td><td><b>oldFlag</b></td><td><b>playWeight</b></td>
		</tr>
		{% for row in hits_rotation_ranking %}
		<tr>
			<td>{{ row.ID }}</td>
			<td>{{ row.title.decode('utf-8') }}</td>
			<td>{{ row.CorrectedBayesian }}</td>
			<td>{{ row.mean }}</td>
			<td>{{ row.post_date }}</td>
			<td>{{ row.date_played }}</td>
			<td>{{ row.daysOld }}</td>
			<td>{{ row.newFlag }}</td>
			<td>{{ row.oldFlag }}</td>
			<td>{{ row.playWeight }}</td>
		</tr>
		{% endfor %}
	</table>
	<hr/><br/>

</body>
</html>